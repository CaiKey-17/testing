<main id="content" xmlns:th="http://www.w3.org/1999/xhtml">


    <div id="collection" class="collection-page">
        <div class="main-content">
            <div>
                <div>
                    <div id="collection-body" class="wrap-collection-body clearfix">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="content-header align-centre">
                                <h1 class="page-title hide">
                                    TOPS
                                </h1>

                                <div class="alert-no-filter"></div>

                            </div>
                            <div class="collection-sorter row cf">
                                <div class="collection-search">
                                    <input type="text" id="search-product" class="langplaceholder" keyLanguage="tim_kiem_san_pham" placeholder="Tìm kiếm sản phẩm" />
                                    <button class="lang" keyLanguage="tim_kiem" onclick="searchProduct()">Tìm kiếm</button>
                                </div>

                                <div class="filter-by-price inline-select">
                                    <label for="price-filter" class="lang" keyLanguage="phan_loai_theo_gia">Phân loại theo giá:</label>
                                    <select id="price-filter" onchange="filterByPrice()">
                                        <option value="" class="lang" keyLanguage="tat_ca">Tất cả</option>
                                        <option value="under500k" class="lang" keyLanguage="duoi_500k">Dưới 500k</option>
                                        <option value="under1m" class="lang" keyLanguage="duoi_1_trieu">Dưới 1 triệu</option>
                                        <option value="above2m" class="lang" keyLanguage="mot_trieu_st">1 triệu trở lên</option>
                                    </select>
                                </div>

                                <div class="filter-by-color inline-select">
                                    <label for="color-filter" class="lang" keyLanguage="phan_loai_theo_mau">Phân loại theo màu:</label>
                                    <select id="color-filter" onchange="filterByColor()">
                                        <option value="" class="lang" keyLanguage="tat_ca">Tất cả</option>
                                        <option value="Hồng nhạt" class="lang" keyLanguage="hong_nhat">Hồng nhạt</option>
                                        <option value="Xanh dương" class="lang" keyLanguage="xanh">Xanh dương</option>
                                        <option value="Xám" class="lang" keyLanguage="xam">Xám</option>
                                        <option value="Đen" class="lang" keyLanguage="den">Đen</option>
                                        <option value="Vàng" class="lang" keyLanguage="vang">Vàng</option>
                                    </select>

                                </div>


                                <script>
                                    function filterByColor() {
                                        const colorId = document.getElementById("color-filter").value;
                                        const urlParams = new URLSearchParams(window.location.search);
                                        urlParams.set("color", colorId);
                                        window.location.search = urlParams.toString();
                                    }
                                </script>


                                <div class="filter-by-size inline-select">
                                    <label for="size-filter" class="lang" keyLanguage="phan_loai_theo_size">Phân loại theo kích thước:</label>
                                    <select id="size-filter" onchange="filterBySize()">
                                        <option value="">Tất cả</option>
                                        <option value="S">S</option>
                                        <option value="M">M</option>
                                        <option value="L">L</option>
                                        <option value="XL">XL</option>
                                        <option value="XXL">XXL</option>
                                    </select>

                                </div>
                                <script>
                                    function filterBySize() {
                                        const sizeID = document.getElementById("size-filter").value;
                                        const urlParams = new URLSearchParams(window.location.search);
                                        urlParams.set("size", sizeID);
                                        window.location.search = urlParams.toString();
                                    }
                                </script>


                                <div class="collection-sort inline-select" onclick="toggleOptions()">

                                    <select class="sort-by" onchange="sortProducts()">

                                        <option value="manual" class="lang" keylanguage="sp_noi_bat">Sản phẩm nổi bật</option>

                                        <option value="asc" class="lang" keylanguage="gia_tang_dan">GIÁ: TĂNG DẦN</option>
                                        <option value="desc" class="lang" keylanguage="gia_giam_dan">GIÁ: GIẢM DẦN</option>


                                    </select>
                                </div>
                            </div>

                            <div class="row filter-here">
                                <div class="content-product-list product-list filter clearfix">


                                    <div class="col-md-3 col-sm-6 col-xs-6 pro-loop col-4" th:each="product : ${aboutInfo}">


                                        <div class="product-block product-resize fixheight"
                                             data-anmation="38" style="height: 587px;">
                                            <div class="product-img">
                                                <a th:href="'/detail/' + ${product.id}"
                                                   title="HADES LODESTAR BLUR TEE" class="image-resize"
                                                   style="height: 488px;">
                                                    <picture>
                                                        <source media="(max-width: 767px)" th:srcset="@{/images/{image}(image=${product.image})}" />
                                                        <source media="(min-width: 768px)" th:srcset="@{/images/{image}(image=${product.image})}" />
                                                        <img class="img-loop" alt="HADES LODESTAR BLUR TEE" th:src="@{/images/{image}(image=${product.image})}" />
                                                    </picture>

                                                    <picture>
                                                        <source media="(max-width: 767px)" th:srcset="@{/images/{image}(image=${product.imagehover})}" />
                                                        <source media="(min-width: 768px)" th:srcset="@{/images/{image}(image=${product.imagehover})}" />
                                                        <img class="img-loop img-hover" alt="HADES LODESTAR BLUR TEE" th:src="@{/images/{image}(image=${product.imagehover})}" />
                                                    </picture>

                                                </a>
                                                <div class="button-add" datahand="hares-lodestar-blur-tee">
                                                    <button keylanguage="mua_ngay" type="submit"
                                                            title="Mua ngay" class="action lang"
                                                            onclick="buy_now('1115607846')">MUA NGAY
                                                    </button>
                                                    <button class="action add-to-cart lang"   th:attr="data-variantid=${product.id}"  onclick="addToCart(this)">THÊM VÀO GIỎ</button>

                                                </div>
                                            </div>


                                            <div class="sub-variant-option">


                                                <div class="product-loop-variant" th:each="color : ${product.colors}">
                                                    <div class="product-loop-variant-span" th:classappend="' ' + ${color.name}"></div>
                                                </div>


                                            </div>


                                            <div class="product-detail clearfix">
                                                <div class="box-pro-detail">
                                                    <h3 class="pro-name">
                                                        <a class="font-oswald"
                                                           href="/products/hares-lodestar-blur-tee"
                                                           title="HADES LODESTAR BLUR TEE" th:text="${product.name}">
                                                        </a>
                                                    </h3>
                                                    <div class="box-pro-prices">
                                                        <p class="pro-price" th:text="${product.price}" >
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>



                                </div>
                                <div class="sortpagibar pagi clearfix text-center">
                                    <div id="pagination" class="clearfix">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <!-- Nút Previous -->
                                            <th:block th:if="${currentPage > 0}">
                                                <a class="prev" th:href="@{'/bags?page=' + ${currentPage - 1} + '&keyword=' + ${keyword} + '&sortOrder=' + ${sortOrder} + '&priceRange=' + ${priceRange} + '&color=' + ${color} + '&size=' + ${size}}">
                                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 31 10" style="enable-background:new 0 0 31 10; width: 31px; height: 10px;" xml:space="preserve">
                        <polygon points="31,5 25,0 25,4 0,4 0,6 25,6 25,10 "></polygon>
                    </svg>
                                                </a>
                                            </th:block>

                                            <!-- Các trang phân trang -->
                                            <th:block th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
                                                <a class="page-node" th:href="@{'/bags?page=' + ${i} + '&keyword=' + ${keyword} + '&sortOrder=' + ${sortOrder} + '&priceRange=' + ${priceRange} + '&color=' + ${color} + '&size=' + ${size}}"
                                                   th:classappend="${i == currentPage} ? 'current' : ''" th:text="${i + 1}"></a>
                                            </th:block>

                                            <!-- Nút Next -->
                                            <th:block th:if="${currentPage + 1 < totalPages}">
                                                <a class="next" th:href="@{'/bags?page=' + ${currentPage + 1} + '&keyword=' + ${keyword} + '&sortOrder=' + ${sortOrder} + '&priceRange=' + ${priceRange} + '&color=' + ${color} + '&size=' + ${size}}">
                                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 31 10" style="enable-background:new 0 0 31 10; width: 31px; height: 10px;" xml:space="preserve">
                        <polygon points="31,5 25,0 25,4 0,4 0,6 25,6 25,10 "></polygon>
                    </svg>
                                                </a>
                                            </th:block>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <input type="text" class="hidden" id="coll-handle" value="(collectionid:product=1001758908)">
    </div>
</main>